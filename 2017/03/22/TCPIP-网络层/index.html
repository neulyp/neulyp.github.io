<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>网络层 | lyp's blog</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">网络层</h1><a id="logo" href="/.">lyp's blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Inicio</i></a><a href="/archives/"><i class="fa fa-archive"> Archivo</i></a><a href="/about/"><i class="fa fa-user"> Acerca de</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">网络层</h1><div class="post-meta">Mar 22, 2017<span> | </span><span class="category"><a href="/categories/TCPIP协议族/">TCPIP协议族</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>网络层负责主机到主机的交付。并且在分组经过路由器时负责为其选择路由。</p>
<h4 id="交换"><a href="#交换" class="headerlink" title="交换"></a>交换</h4><ol>
<li>电路交换</li>
<li>分组交换</li>
</ol>
<p>来自上层的报文被分割成便于管理的一个个分组，再通过网络发送这些分组。豹纹的源点逐个发送分组，而其重点也逐个接受这些分组。当分组都到期之后，再交付给上层。</p>
<ul>
<li>无连接服务</li>
</ul>
<p>每个分组都是一个独立的个体</p>
<p>每个分组都选择路由时要根据包含在首部的信息：原地址和目的地址，路由器仅仅根据目的地址为期路由，原地址为用于该数据包被丢弃的时候，向源点发送差错信息。</p>
<ul>
<li>面向连接服务</li>
</ul>
<p>在面向连接的服务中，属于同一个报文的所有分组之间是有关联的。在一个豹纹的数据报被发送之前，应当首先建立一条徐连接已制定这些数据流通过的路径。在这种类型的服务中，分组不仅要包含原地址和目标地址，还要包含一个流标号。</p>
<p>要建立面向连接的服务必须经过以下三个阶段： 建链 数据传送 拆链。</p>
<p>各分组的转发依据包含在分组中的标号。<br><img src="C:\Users\neuly.DESKTOP-NBVHT1S\Desktop\mg\22.png" alt="image"></p>
<ol>
<li>其他问题</li>
</ol>
<ul>
<li>差错控制</li>
</ul>
<p>差错控制包括损坏，丢失以及重复的数据报进行检测的机制。</p>
<ul>
<li>流量控制</li>
</ul>
<p>用于调整源点发送的数据量以避免接收方超载。</p>
<ul>
<li>拥塞控制</li>
</ul>
<h3 id="ipv4"><a href="#ipv4" class="headerlink" title="ipv4"></a>ipv4</h3><p>ipv4是一个32位的地址。他们的唯一性表示了在每个地址仅能定义一个到因特网的链接。</p>
<ol>
<li>编址</li>
</ol>
<p>五类：abcde</p>
<ul>
<li>0 0-127</li>
<li>10 128-191</li>
<li>110 192-223</li>
<li>1110 224-239</li>
<li>1111 240-255</li>
</ul>
<ol>
<li>nat</li>
</ol>
<p>nat:网络地址转换 它提供了专用地址和全球地址之前的互相映射。同时支持虚拟专用网络。</p>
<p>nat路由器有一张转换表</p>
<p>使用ip地址池： 如果nat路由器仅仅使用一个全球地址，俺么在专用网路中一次只允许一台机器访问外部机器。<br>使用ip地址和端口地址：为了和外部服务器程序之间多对多的关系。</p>
<table>
<thead>
<tr>
<th>专用地址</th>
<th>专用端口</th>
<th>外部地址</th>
<th>外部端口</th>
<th>运输层协议</th>
</tr>
</thead>
<tbody>
<tr>
<td>172.18.3.1</td>
<td>1400</td>
<td>25.8.3.3</td>
<td>80</td>
<td>tcp</td>
</tr>
<tr>
<td>172.18.3.1</td>
<td>1401</td>
<td>25.8.3.3</td>
<td>80</td>
<td>tcp</td>
</tr>
</tbody>
</table>
<h3 id="ip分组的交付和转发"><a href="#ip分组的交付和转发" class="headerlink" title="ip分组的交付和转发"></a>ip分组的交付和转发</h3><p>交付是指在网络层的控制下，底层各个网络对分组的处理方式。</p>
<p>转发指的是把分组交付到下一站的方式。分为基于目的地址的转发和基于附加在分组上的标记和转发</p>
<h3 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h3><p>arp接受来自ip协议的逻辑地址，将其映射为响应的物理地址。然后把这个物理地址交给数据链路层。</p>
<p>当一个主机想要知道另一个主机的物理地址是，发送一个arp查询分组，这个分组包含了发送方得mac和ip地址，和目的主机的ip。因为发送不知道接收方的物理地址，所以这个查询分组会在网络上进行广播。</p>
<p>网络上每一个主机都接受并处理这个arp查询分组，但只有期待的接受者才能认出这是自己的ip，并返回一个arp分组，</p>
<h3 id="ICMP协议"><a href="#ICMP协议" class="headerlink" title="ICMP协议"></a>ICMP协议</h3><p>ipv4提供了不可靠和无连接的数据报交付。<br>有点：有效的利用网络资源。<br>缺点：缺少差错控制和辅助机制。</p>
<p>icmpv4就是为了补偿这两个缺点设计的。</p>
<p>icmp首先要封装成ip数据报，然后才被传递到下一层。</p>
<h3 id="单播"><a href="#单播" class="headerlink" title="单播"></a>单播</h3><h3 id="多播"><a href="#多播" class="headerlink" title="多播"></a>多播</h3></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2017/03/22/TCPIP-网络层/" data-id="cj0l70fl0005k0ww0vsirmi31" class="article-share-link">Cuota</a><div class="tags"><a href="/tags/TCPIP协议族/">TCPIP协议族</a></div><div class="post-nav"><a href="/2017/03/22/TCPIP-传输层2-用户数据包协议（udp）/" class="pre">TCPIP-传输层2-用户数据包协议（udp）</a><a href="/2017/03/22/TCPIP-应用层3-dns/" class="next">TCPIP-应用层3-dns</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categorías</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/TCPIP协议族/">TCPIP协议族</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javaweb/">javaweb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java杂记/">java杂记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jcf/">jcf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/juc/">juc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jvm/">jvm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/life/">life</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/pat/">pat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/poffer/">poffer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tcp-ip协议族/">tcp-ip协议族</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tomact/">tomact</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据仓库/">数据仓库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机网络/">计算机网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/高性能mysql/">高性能mysql</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Etiquetas</i></div><div class="tagcloud"><a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/jcf/" style="font-size: 15px;">jcf</a> <a href="/tags/高性能mysql/" style="font-size: 15px;">高性能mysql</a> <a href="/tags/java杂记/" style="font-size: 15px;">java杂记</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/poffer/" style="font-size: 15px;">poffer</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/TCPIP协议族/" style="font-size: 15px;">TCPIP协议族</a> <a href="/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/tags/hashmap/" style="font-size: 15px;">hashmap</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/juc/" style="font-size: 15px;">juc</a> <a href="/tags/life/" style="font-size: 15px;">life</a> <a href="/tags/javaweb/" style="font-size: 15px;">javaweb</a> <a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/linkedhashmap/" style="font-size: 15px;">linkedhashmap</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/计算机网络/" style="font-size: 15px;">计算机网络</a> <a href="/tags/pat/" style="font-size: 15px;">pat</a> <a href="/tags/tcpip/" style="font-size: 15px;">tcpip</a> <a href="/tags/tomact/" style="font-size: 15px;">tomact</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/数据仓库/" style="font-size: 15px;">数据仓库</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recientes</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-应用层4-远程登录telnet&ssh/">TCPIP-应用层4-远程登录telnet&ssh</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-传输层4-tcp2之连接/">TCPIP-传输层4-tcp2之连接</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/面试/">面试</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-传输层3-tcp1之概述(1)/">TCPIP-传输层3-tcp1之概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-应用层5-http/">TCPIP-应用层5-http</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-传输层1-介绍/">TCPIP-传输层1-介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-传输层2-用户数据包协议（udp）/">TCPIP-传输层2-用户数据包协议（udp）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-网络层/">网络层</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-应用层3-dns/">TCPIP-应用层3-dns</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/TCPIP-传输层5-tcp3之流量控制差错控制和拥塞控制/">TCPIP-传输层5-tcp3之流量控制差错控制和拥塞控制</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="hellozjf.com" title="周靖峰" target="_blank">周靖峰</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">lyp's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>